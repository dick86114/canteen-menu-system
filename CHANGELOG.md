# 更新日志

本文档记录了食堂菜单系统的所有重要更新和变更。

## [未发布] - 开发中

### 新增功能
- 添加了对WPS表格文件(.et)格式的支持
- 增加了Docker环境变量时区支持(TZ=Asia/Shanghai)
- 创建了统一的时区处理工具模块
- **新增**: 实现了菜品分类和菜品的原始顺序保持功能，现在按照Excel表格中的顺序显示

### 修复问题
- **重要修复**: 修复了基于星期格式菜单的餐次识别问题，现在能正确分离早餐、午餐、晚餐数据
- **重要修复**: 修复了菜品分类逻辑问题，现在能正确处理跨多行的分类（如荤类包含多个菜品）
- **重要修复**: 修复了分类识别算法，现在能正确区分"免费例汤"和"炖罐"等相似分类
- 修复了前端月历日期标记错位一天的问题
- 修复了时区转换导致的日期显示错误
- 改进了Excel解析器对缺少明确餐次标识的菜单格式的智能识别
- **测试修复**: 修复了GitHub构建中MenuItem序列化测试失败的问题，更新测试用例以包含新的排序字段

### 改进优化
- 将所有项目文档翻译为中文
- 优化了Excel解析器的错误处理和餐次推断逻辑
- 改进了菜单数据的验证逻辑
- 增强了基于"类别"行的餐次自动识别功能
- **重要改进**: 添加了排序系统，确保分类卡片和菜品都按照Excel表格中的原始顺序显示

## [v1.0.0] - 2024-12-XX

### 初始版本
- 基础的Excel菜单文件解析功能
- 支持.xlsx、.xls、.csv格式
- Web界面菜单展示
- 日期选择和导航功能
- Docker容器化部署
- 自动文件扫描和加载

### 核心功能
- **文件解析**: 支持多种Excel格式的菜单文件解析
- **菜单展示**: 清晰的Web界面展示每日菜单
- **日期导航**: 便捷的日期选择和月历视图
- **响应式设计**: 适配不同设备屏幕
- **容器化部署**: 使用Docker简化部署流程

### 技术栈
- **前端**: React + TypeScript + Vite
- **后端**: Python + Flask
- **数据处理**: pandas + openpyxl
- **容器化**: Docker + Docker Compose

---

## 版本说明

### 版本号规则
本项目遵循[语义化版本](https://semver.org/lang/zh-CN/)规范：
- **主版本号**: 不兼容的API修改
- **次版本号**: 向下兼容的功能性新增
- **修订号**: 向下兼容的问题修正

### 更新类型
- **新增功能**: 新的功能特性
- **修复问题**: Bug修复和问题解决
- **改进优化**: 性能优化和用户体验改进
- **重大变更**: 可能影响现有功能的重要变更

### 贡献指南
如需贡献代码或报告问题，请参考 [CONTRIBUTING.md](CONTRIBUTING.md) 文件。

### 技术支持
如有技术问题或建议，请通过以下方式联系：
- 创建GitHub Issue
- 查看项目文档
- 参考部署指南 [DEPLOYMENT.md](DEPLOYMENT.md)